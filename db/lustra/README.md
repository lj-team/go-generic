# Протокол

В качестве транспорт используются UDP

## Формат сообщения

### Синхронная отправка

```
exec command
```

нормальные ответ

```
+answer
```

ошибка

```
-error
```

### Асинхронная отправка (без ожидания ответа)

```
async command
```

##  Команды

## cbadd

Добавление в циклический буфер

```
cbadd buffer value maxBufSize
```

ответ

```
ok
```

Значение содержимое буфера можно получить обычным вызовом get, данные придут в виде json.

### dec

декремент на 1

```
dec key
```

ответ

```
value
```

### decby

декремент ключа на заданное значение

```
decby key cnt
```

ответ

```
value
```

### del

удаление заданных ключей

```
del key1 ... keyN
```

ответ

```
ok
```

### get

получение занчения ключа, если нет пустая строка

```
get key
```

ответ

```
value
```

### hdec

декремент ключа хэша на 1

```
hdec hash key
```

ответ

```
value
```

### hdecby

декремент ключа хэша на заданное значение

```
hdecby hash key cnt
```

ответ

```
value
```

### hdel

удаление заданных ключей из хэша, если они есть

```
hdel hash key1 ... keyN
```

ответ

```
value
```

### hget

получение значения ключа в хэше, если нет такого пустая строка

```
hget hash key
```

ответ

```
value
```

### hinc

инкремент ключа хэша на 1

```
hinc hash key
```

ответ

```
value
```

### hincby

инкремент ключа хэша на заданное значение

```
hincby hash key cnt
```

ответ

```
value
```

### hset

установка значений ключей в хэше. если такого хэша нет или есть просто значение, то оно преобразуется в хэш.

```
hset hash key1 value1 ... keyN value
```

ответ

```
ok
```

### hsetifless

установка значения ключа хэша, если числовое новое значение меньше текущего.

```
hsetifless hash key value
```

ответ

```
actual_value
```

### hsetifmore

установка значения ключа хэша, если числовое новое значение больше текущего.

```
hsetifmore hash key value
```

ответ

```
actual_value
```


### hsetnx

установка значений ключа в хэше, если этого ключа в хэше еще нет

```
hsetnx hash key value
```

ответ

```
value
```

### inc

инкремент ключа на 1

```
inc key
```

ответ

```
value
```

### incby

инкремент ключа на заданное значение

```
incby key cnt
```

ответ

```
value
```

### ping

пинг сервера

```
ping
```

ответ

```
pong
```

### set

задание значений ключей

```
set key1 value1 ... keyN valueN
```

ответ

```
ok
```

### setifless

установка значения ключа, если числовое новое значение меньше текущего.

```
setifless key value
```

ответ

```
actual_value
```

### setifmore

установка значения ключа, если числовое новое значение больше текущего.

```
setifmore key value
```

ответ

```
actual_value
```

### setnx

присвоение ключу значения, если оно не задано илипустая строка

```
setnx key value
```

возвращает актуальное значение ключа

```
value
```

### time

получение текущего времени сервера

```
time
```

ответ

```
2020-09-28 09:48:04
```

### uheap

добавления элемента в конец буфера, если его нет. если элемент есть, то он переносит в конец.
если элементов больше чем maxBufferSize, то из начала удаляется необходимое число элементов

```
uheap buffer value maxBufferSize
```

ответ

```
ok
```

### version

получение версии сервера

```
version
```

ответ

```
v1.0.13
```
